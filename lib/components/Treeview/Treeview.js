"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../_rollupPluginBabelHelpers-5072e08f.js"),t=require("react");require("bootstrap/dist/css/bootstrap.min.css"),require("@fortawesome/react-fontawesome"),require("react-bootstrap");var r=require("../../hooks/useExpose.js"),n=require("../../deepMerge-7b551933.js"),o=require("../../_commonjsHelpers-b3309d7b.js"),a=require("./TreeviewContext.js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=i(t);var u=function e(t,r=new Map){if(null===t||"object"!=typeof t)return t;if(r.has(t))return r.get(t);const n=Array.isArray(t)?[]:{};r.set(t,n);for(const o in t)t.hasOwnProperty(o)&&(n[o]=e(t[o],r));return n},c=o.getDefaultExportFromCjs(u);var d=function e(t,r,n={},o=[]){const{idKey:a="key",childrenKey:i="children"}=n;return t.map((t=>{const l=[...o,t[a]],u=r(t,l,n)||t;return t[i]&&t[i].length>0&&(u[i]=e(t[i],r,n,l)),u}),{idKey:"name"})},f=o.getDefaultExportFromCjs(d);var s=function(e,t,r,n={}){const{idKey:o="key",childrenKey:a="children"}=n;"string"==typeof t&&(t=t.split("."));let i=e;for(const[e,n]of t.entries())"object"!=typeof i||Array.isArray(i)?"object"==typeof i&&Array.isArray(i)&&(i=i.find((e=>e?.[o]===n))):e===t.length-1?i[n]=r:i[n]?i=i[n]:i[a]&&i[a].find((e=>e?.[o]===n))?i=i[a].find((e=>e?.[o]===n)):i[n]=r;return e},p=o.getDefaultExportFromCjs(s);var y=function(e,t,r={}){const{defaultValue:n=null,idKey:o="key",childrenKey:a="children"}=r;"string"==typeof t&&(t=t.split("."));let i=e;for(const[e,r]of t.entries())if("object"!=typeof i||Array.isArray(i))"object"==typeof i&&Array.isArray(i)&&(i=i.find((e=>e?.[o]===r)));else if(i[r])i=i[r];else{if(!i[a])return n;i=i[a].find((e=>e?.[o]===r))}return i},_=o.getDefaultExportFromCjs(y),v=["children"];require("./style.css");var m=t.forwardRef((function(n,o){var i=n.name;n.title;var u=n.children;n.open,o=o||l.default.createRef(o);var c=t.useContext(a.default),d=c.options,f=c.data,s=c.toggleNode,p=t.useState({}),y=e._slicedToArray(p,2),v=y[0],m=y[1];r.default(o,{self:{}}),t.useEffect((function(){i||console.warn("TreeNode requires a name if you want to control it externally.")}),[]);return t.useEffect((function(){m(_(f,_(n,"_.path")))}),[f]),v&&l.default.createElement("div",{ref:o},d.model.Node(e._objectSpread2({},v),l.default.Children.map(u,(function(e,t){return l.default.cloneElement(e,{key:t})})),(function(){s(v._.path)}),v._&&v._.open))})),h=t.forwardRef((function(o,i){i=i||l.default.createRef(i);var u={model:{Node:function(e,t,r,n){return l.default.createElement("div",e,l.default.createElement("a",{onClick:r},n?"[-]":"[+]"),e.title,n&&t&&l.default.createElement("div",{style:{marginLeft:"20px"}},t))}}},d=t.useState((function(){return n.deepMerge(u,o.options||{})})),s=e._slicedToArray(d,2),y=s[0],h=s[1],g=t.useState(o.data||[]),b=e._slicedToArray(g,2),j=b[0],A=b[1],E=t.useState([]),S=e._slicedToArray(E,2),x=S[0],C=S[1],q=t.useState(),w=e._slicedToArray(q,2),N=w[0],k=w[1],K=function(t){return f(t,(function(t,r){return e._objectSpread2(e._objectSpread2({},t),{},{key:t.name,_:e._objectSpread2(e._objectSpread2({},t._),{},{level:r.length-1,path:r})})}),{idKey:"name"})},T=function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r.map((function(r){return l.default.createElement(m,e._extends({},r,{key:r.name,title:r.title||r.name,path:[r.key],level:n}),r.children&&t(r.children,n+1))}))},D=function t(r){return r&&0!==r.length?l.default.Children.map(r,(function(r){var n=r.props,o=n.children,a=e._objectWithoutProperties(n,v);return e._objectSpread2(e._objectSpread2({},a),{},{children:t(o)})})):[]},O=function(e,t){p(j,e,t),A(c(j))},P=function(t){"string"==typeof t&&(t=t.split(".")),t=[].concat(e._toConsumableArray(t),["_","open"]),p(j,t,!_(j,t)),A(c(j))};return r.default(i,{self:{options:y,setOptions:h,data:j,setData:A},writeNode:O,readNode:function(e){return _(j,e)},expandNode:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("toggle"==r)return P(t);if("string"==typeof t&&(t=t.split(".")),1==r)for(var n=0;n<t.length;n++){var o=t.slice(0,n+1);o=[].concat(e._toConsumableArray(o),["_","open"]),O(o,r)}else t=[].concat(e._toConsumableArray(t),["_","open"]),O(t,r)},toggleNode:P,expandAll:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("toggle"==t){var r=!1;f(j,(function(e,t){e._.open||(r=!0)})),t=!!r}var n=f(j,(function(r,n){return e._objectSpread2(e._objectSpread2({},r),{},{_:e._objectSpread2(e._objectSpread2({},r._),{},{open:t})})}));A(c(n))}}),t.useEffect((function(){if(o.data&&o.data.length>0){var e=K(o.data);A(e),C(T(e))}else if(o.children){var t=D(o.children),r=K(t);A(r),C(T(r))}k(!0)}),[o.children,o.data]),N&&l.default.createElement("div",e._extends({ref:i},o),l.default.createElement(a.default.Provider,{value:{options:y,setOptions:h,data:j,setData:A,ready:N,toggleNode:P}},x))}));h.displayName="Treeview";var g=Object.assign(h,{Node:m});exports.default=g;

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../_rollupPluginBabelHelpers-412799d7.js"),t=require("react");require("bootstrap/dist/css/bootstrap.min.css");var r=require("react-bootstrap/Dropdown"),a=require("../../deepMerge-c3f17a9c.js"),n=require("../../hooks/useScreen.js"),l=require("../../hooks/useExpose.js"),o=require("react-bootstrap"),u=require("./TreedownContext.js"),d=require("./components/TreedownItem.js"),c=require("./components/TreedownButton.js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("react-bootstrap/DropdownButton");var s=i(t),f=i(r);require("./Treedown.css");var p=t.forwardRef((function(r,a){var n=r.title,l=r.children;a=a||s.default.createRef(a);var d=t.useContext(u.default),i=d.options,f=d.drawerExpanded,p=d.collapseDrawer,m=i.drawerProps;return s.default.createElement(o.Offcanvas,e._extends({show:f,onHide:p,ref:a},m,{className:"ioutil-treedown-drawer ".concat(m.className||"")}),i.model.Drawer(n,s.default.createElement(c.default,{show:!0,title:"hidden",className:"ioutil-treedown ".concat(m.className||"")},l)))})),m=t.forwardRef((function(r,d){d=d||s.default.createRef();var i={title:r.title,expand:r.expand||"sm",defaultMenuDrop:"end",drawerMenuDrop:"bottom",drawerProps:{style:{left:0,right:0},className:""},model:{Element:function(e){return s.default.createElement(s.default.Fragment,null,e.children?s.default.createElement(c.default,{title:e.key},e.children):s.default.createElement(f.default.Item,null,e.key))},Drawer:function(e,t){return s.default.createElement(s.default.Fragment,null,s.default.createElement(o.Offcanvas.Header,{closeButton:!0},s.default.createElement(o.Offcanvas.Title,null,e)),s.default.createElement(o.Offcanvas.Body,null,t))}}},m=t.useState((function(){return a.deepMerge(i,r.options||{})})),w=e._slicedToArray(m,2),E=w[0],h=w[1],b=t.useState(r.data),v=e._slicedToArray(b,2),_=v[0],j=v[1],x=t.useState([]),y=e._slicedToArray(x,2),S=y[0],q=y[1],T=n.useScreen(),D=t.useState(!1),g=e._slicedToArray(D,2),N=g[0],O=g[1],k=t.useState(!1),A=e._slicedToArray(k,2),B=A[0],C=A[1],M=function(){return O(!1)},P=function(){return O(!0)};l.default(d,{self:{data:_,setData:j,options:E,setOptions:h},setTitle:function(t){h((function(r){return e._objectSpread2(e._objectSpread2({},r),{},{title:t})}))},title:E.title,collapseDrawer:M,expandDrawer:P,toggleDrawer:function(){return O((function(e){return!e}))}});var R=function t(r){return r?r.map((function(r,a){var n=Array.isArray(r.children)&&r.children.length>0;return s.default.createElement(s.default.Fragment,{key:a},E.model.Element(e._objectSpread2(e._objectSpread2({},r),{},{children:n?t(r.children):null})))})):null};return t.useEffect((function(){r.title||console.error("Treedown requires a title prop.")}),[r]),t.useEffect((function(){T&&T.size&&C(!n.shouldExpand(T,E.expand))}),[T&&T.size]),t.useEffect((function(){r.data?q(R(r.data)):r.children&&q(r.children)}),[r.children,r.data]),s.default.createElement(u.default.Provider,{value:{options:E,setOptions:h,data:_,setData:j,collapseDrawer:M,drawerExpanded:N}},S&&!B&&s.default.createElement(c.default,e._extends({root:"true",onClick:function(){h((function(t){return e._objectSpread2(e._objectSpread2({},t),{},{behaviour:"default"})}))},ref:d},r,{title:E.title,className:"ioutil-treedown ".concat(r.className||"")}),S),S&&B&&s.default.createElement(c.default,e._extends({root:"true",onClick:function(){P(),h((function(t){return e._objectSpread2(e._objectSpread2({},t),{},{behaviour:"drawer"})}))},ref:d},r,{title:E.title,className:"ioutil-treedown ioutil-treedown-hidemenu ".concat(r.className||"")})),s.default.createElement(p,{title:r.title},S))}));m.displayName="Treedown";var w=Object.assign(m,{Button:c.default,Item:d.default,Context:u.default});exports.Treedown=m,exports.default=w;

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../_rollupPluginBabelHelpers-412799d7.js"),t=require("react");require("bootstrap/dist/css/bootstrap.min.css");var r=require("react-bootstrap/Dropdown"),a=require("../../deepMerge-7b551933.js"),n=require("../../hooks/useScreen.js"),l=require("../../hooks/useExpose.js"),o=require("react-bootstrap"),u=require("./TreedownContext.js"),d=require("./components/TreedownItem.js"),c=require("./components/TreedownButton.js");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("../../_commonjsHelpers-b3309d7b.js"),require("react-bootstrap/DropdownButton");var i=s(t),f=s(r);require("./Treedown.css");var p=t.forwardRef((function(r,a){var n=r.title,l=r.children;a=a||i.default.createRef(a);var d=t.useContext(u.default),s=d.options,f=d.drawerExpanded,p=d.collapseDrawer,m=s.drawerProps;return i.default.createElement(o.Offcanvas,e._extends({show:f,onHide:p,ref:a},m,{className:"ioutil-treedown-drawer ".concat(m.className||"")}),s.model.Drawer(n,i.default.createElement(c.default,{show:!0,title:"hidden",className:"ioutil-treedown ".concat(m.className||"")},l)))})),m=t.forwardRef((function(r,d){d=d||i.default.createRef();var s={title:r.title,expand:r.expand||"sm",defaultMenuDrop:"end",drawerMenuDrop:"bottom",drawerProps:{style:{left:0,right:0},className:""},model:{Element:function(e){return i.default.createElement(i.default.Fragment,null,e.children?i.default.createElement(c.default,{title:e.key},e.children):i.default.createElement(f.default.Item,null,e.key))},Drawer:function(e,t){return i.default.createElement(i.default.Fragment,null,i.default.createElement(o.Offcanvas.Header,{closeButton:!0},i.default.createElement(o.Offcanvas.Title,null,e)),i.default.createElement(o.Offcanvas.Body,null,t))}}},m=t.useState((function(){return a.deepMerge(s,r.options||{})})),w=e._slicedToArray(m,2),b=w[0],E=w[1],h=t.useState(r.data),j=e._slicedToArray(h,2),_=j[0],v=j[1],x=t.useState([]),q=e._slicedToArray(x,2),y=q[0],S=q[1],T=n.useScreen(),D=t.useState(!1),g=e._slicedToArray(D,2),N=g[0],O=g[1],k=t.useState(!1),A=e._slicedToArray(k,2),B=A[0],C=A[1],M=function(){return O(!1)},P=function(){return O(!0)};l.default(d,{self:{data:_,setData:v,options:b,setOptions:E},setTitle:function(t){E((function(r){return e._objectSpread2(e._objectSpread2({},r),{},{title:t})}))},title:b.title,collapseDrawer:M,expandDrawer:P,toggleDrawer:function(){return O((function(e){return!e}))}});var H=function t(r){return r?r.map((function(r,a){var n=Array.isArray(r.children)&&r.children.length>0;return i.default.createElement(i.default.Fragment,{key:a},b.model.Element(e._objectSpread2(e._objectSpread2({},r),{},{children:n?t(r.children):null})))})):null};return t.useEffect((function(){r.title||console.error("Treedown requires a title prop.")}),[r]),t.useEffect((function(){T&&T.size&&C(!n.shouldExpand(T,b.expand))}),[T&&T.size]),t.useEffect((function(){r.data?S(H(r.data)):r.children&&S(r.children)}),[r.children,r.data]),i.default.createElement(u.default.Provider,{value:{options:b,setOptions:E,data:_,setData:v,collapseDrawer:M,drawerExpanded:N}},y&&!B&&i.default.createElement(c.default,e._extends({root:"true",onClick:function(){E((function(t){return e._objectSpread2(e._objectSpread2({},t),{},{behaviour:"default"})}))},ref:d},r,{title:b.title,className:"ioutil-treedown ".concat(r.className||"")}),y),y&&B&&i.default.createElement(c.default,e._extends({root:"true",onClick:function(){P(),E((function(t){return e._objectSpread2(e._objectSpread2({},t),{},{behaviour:"drawer"})}))},ref:d},r,{title:b.title,className:"ioutil-treedown ioutil-treedown-hidemenu ".concat(r.className||"")})),i.default.createElement(p,{title:r.title},y))}));m.displayName="Treedown";var w=Object.assign(m,{Button:c.default,Item:d.default,Context:u.default});exports.Treedown=m,exports.default=w;
